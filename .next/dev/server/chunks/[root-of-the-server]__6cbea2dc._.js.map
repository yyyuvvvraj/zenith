{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shlok/OneDrive/Desktop/zenith/src/lib/parseExcel.ts"],"sourcesContent":["import * as XLSX from \"xlsx\";\r\n\r\nexport default async function parseExcel(buffer: Buffer) {\r\n  const wb = XLSX.read(buffer, { type: \"buffer\" });\r\n  const ws = wb.Sheets[wb.SheetNames[0]];\r\n  const rows = XLSX.utils.sheet_to_json(ws, { defval: \"\" });\r\n  const csv = XLSX.utils.sheet_to_csv(ws);\r\n\r\n  return { rows, rawText: csv };\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEe,eAAe,WAAW,MAAc;IACrD,MAAM,KAAK,uIAAS,CAAC,QAAQ;QAAE,MAAM;IAAS;IAC9C,MAAM,KAAK,GAAG,MAAM,CAAC,GAAG,UAAU,CAAC,EAAE,CAAC;IACtC,MAAM,OAAO,wIAAU,CAAC,aAAa,CAAC,IAAI;QAAE,QAAQ;IAAG;IACvD,MAAM,MAAM,wIAAU,CAAC,YAAY,CAAC;IAEpC,OAAO;QAAE;QAAM,SAAS;IAAI;AAC9B"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shlok/OneDrive/Desktop/zenith/src/lib/parseCSV.ts"],"sourcesContent":["import Papa from \"papaparse\";\r\n\r\nexport default async function parseCSV(buffer: Buffer) {\r\n  const text = buffer.toString(\"utf8\");\r\n  const parsed = Papa.parse(text, { header: true });\r\n  return { rows: parsed.data, rawText: text };\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEe,eAAe,SAAS,MAAc;IACnD,MAAM,OAAO,OAAO,QAAQ,CAAC;IAC7B,MAAM,SAAS,mJAAI,CAAC,KAAK,CAAC,MAAM;QAAE,QAAQ;IAAK;IAC/C,OAAO;QAAE,MAAM,OAAO,IAAI;QAAE,SAAS;IAAK;AAC5C"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shlok/OneDrive/Desktop/zenith/src/lib/parsePDF.ts"],"sourcesContent":["// src/lib/parsePDF.ts\r\nexport default async function parsePDF(buffer: Buffer) {\r\n  try {\r\n    // Dynamically import pdf-parse (handle both ESM and CJS shapes)\r\nconst mod: unknown = await import(\"pdf-parse\");\r\n\r\n// Tell TS that module shape is either default or direct function\r\ntype PDFParseFn = (data: Buffer) => Promise<{ text: string }>;\r\n\r\nconst pdf: PDFParseFn =\r\n  (mod as { default?: PDFParseFn }).default ??\r\n  (mod as PDFParseFn);\r\n\r\n    // Call parser\r\n    const data = await pdf(buffer);\r\n\r\n    const text: string = data.text || \"\";\r\n    \r\n    const lines: string[] = text\r\n      .split(\"\\n\")\r\n      .map((line: string) => line.trim())\r\n      .filter((line: string) => line.length > 0);\r\n\r\n    return {\r\n      rawText: text,\r\n      rows: lines.map((line: string) => ({ text: line })),\r\n    };\r\n\r\n  } catch (error) {\r\n    return {\r\n      error: \"PDF parsing failed\",\r\n      detail: String(error),\r\n    };\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,sBAAsB;;;;;AACP,eAAe,SAAS,MAAc;IACnD,IAAI;QACF,gEAAgE;QACpE,MAAM,MAAe;QAKrB,MAAM,MACJ,AAAC,IAAiC,OAAO,IACxC;QAEC,cAAc;QACd,MAAM,OAAO,MAAM,IAAI;QAEvB,MAAM,OAAe,KAAK,IAAI,IAAI;QAElC,MAAM,QAAkB,KACrB,KAAK,CAAC,MACN,GAAG,CAAC,CAAC,OAAiB,KAAK,IAAI,IAC/B,MAAM,CAAC,CAAC,OAAiB,KAAK,MAAM,GAAG;QAE1C,OAAO;YACL,SAAS;YACT,MAAM,MAAM,GAAG,CAAC,CAAC,OAAiB,CAAC;oBAAE,MAAM;gBAAK,CAAC;QACnD;IAEF,EAAE,OAAO,OAAO;QACd,OAAO;YACL,OAAO;YACP,QAAQ,OAAO;QACjB;IACF;AACF"}},
    {"offset": {"line": 193, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shlok/OneDrive/Desktop/zenith/src/lib/parseImage.ts"],"sourcesContent":["// src/lib/parseImage.ts\r\nimport { createWorker } from \"tesseract.js\";\r\nimport fs from \"fs/promises\";\r\nimport path from \"path\";\r\nimport os from \"os\";\r\n\r\nexport default async function parseImage(buffer: Buffer) {\r\n  try {\r\n    const temp = path.join(os.tmpdir(), `ocr-${Date.now()}.png`);\r\n    await fs.writeFile(temp, buffer);\r\n\r\n    const worker = await createWorker(\"eng\");\r\n\r\n    const {\r\n      data: { text },\r\n    } = await worker.recognize(temp);\r\n\r\n    await worker.terminate();\r\n    await fs.unlink(temp);\r\n\r\n    const lines = text\r\n      .split(\"\\n\")\r\n      .map((l) => l.trim())\r\n      .filter(Boolean);\r\n\r\n    return {\r\n      rawText: text,\r\n      rows: lines.map((l) => ({ text: l })),\r\n    };\r\n  } catch (error) {\r\n    return { error: \"OCR failed\", detail: String(error) };\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;;AACxB;AACA;AACA;AACA;;;;;AAEe,eAAe,WAAW,MAAc;IACrD,IAAI;QACF,MAAM,OAAO,4GAAI,CAAC,IAAI,CAAC,wGAAE,CAAC,MAAM,IAAI,CAAC,IAAI,EAAE,KAAK,GAAG,GAAG,IAAI,CAAC;QAC3D,MAAM,gIAAE,CAAC,SAAS,CAAC,MAAM;QAEzB,MAAM,SAAS,MAAM,IAAA,iKAAY,EAAC;QAElC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,OAAO,SAAS,CAAC;QAE3B,MAAM,OAAO,SAAS;QACtB,MAAM,gIAAE,CAAC,MAAM,CAAC;QAEhB,MAAM,QAAQ,KACX,KAAK,CAAC,MACN,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI,IACjB,MAAM,CAAC;QAEV,OAAO;YACL,SAAS;YACT,MAAM,MAAM,GAAG,CAAC,CAAC,IAAM,CAAC;oBAAE,MAAM;gBAAE,CAAC;QACrC;IACF,EAAE,OAAO,OAAO;QACd,OAAO;YAAE,OAAO;YAAc,QAAQ,OAAO;QAAO;IACtD;AACF"}},
    {"offset": {"line": 232, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shlok/OneDrive/Desktop/zenith/src/app/api/parse/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport parseExcel from \"@/lib/parseExcel\";\r\nimport parseCSV from \"@/lib/parseCSV\";\r\nimport parsePDF from \"@/lib/parsePDF\";\r\nimport parseImage from \"@/lib/parseImage\";\r\n\r\nexport async function POST(req: Request) {\r\n  const form = await req.formData();\r\n  const file = form.get(\"file\") as File;\r\n\r\n  if (!file)\r\n    return NextResponse.json({ error: \"No file uploaded\" }, { status: 400 });\r\n\r\n  const ext = file.name.split(\".\").pop()?.toLowerCase() || \"\";\r\n  const buffer = Buffer.from(await file.arrayBuffer());\r\n\r\n  let parsed;\r\n\r\n  if ([\"xlsx\", \"xls\"].includes(ext)) parsed = await parseExcel(buffer);\r\n  else if (ext === \"csv\") parsed = await parseCSV(buffer);\r\n  else if (ext === \"pdf\") parsed = await parsePDF(buffer);\r\n  else parsed = await parseImage(buffer);\r\n\r\n  return NextResponse.json({ parsed });\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEO,eAAe,KAAK,GAAY;IACrC,MAAM,OAAO,MAAM,IAAI,QAAQ;IAC/B,MAAM,OAAO,KAAK,GAAG,CAAC;IAEtB,IAAI,CAAC,MACH,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,OAAO;IAAmB,GAAG;QAAE,QAAQ;IAAI;IAExE,MAAM,MAAM,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,iBAAiB;IACzD,MAAM,SAAS,OAAO,IAAI,CAAC,MAAM,KAAK,WAAW;IAEjD,IAAI;IAEJ,IAAI;QAAC;QAAQ;KAAM,CAAC,QAAQ,CAAC,MAAM,SAAS,MAAM,IAAA,qIAAU,EAAC;SACxD,IAAI,QAAQ,OAAO,SAAS,MAAM,IAAA,mIAAQ,EAAC;SAC3C,IAAI,QAAQ,OAAO,SAAS,MAAM,IAAA,mIAAQ,EAAC;SAC3C,SAAS,MAAM,IAAA,qIAAU,EAAC;IAE/B,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE;IAAO;AACpC"}}]
}